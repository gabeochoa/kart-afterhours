#include "translation_manager.h"
#include "font_info.h"
#include "log.h"
#include "resources.h"
#include "rl.h"
#include <set>

namespace translation_manager {

using TranslationMap = TranslationPlugin::TranslationMap;
using LanguageMap = TranslationPlugin::LanguageMap;

FontID get_font_for_language_mapper(Language language) {
  switch (language) {
  case Language::Korean:
    return FontID::Korean;
  case Language::Japanese:
    return FontID::Japanese;
  case Language::English:
  default:
    return FontID::English;
  }
}

LanguageMap create_translation_data() {
  LanguageMap translations;

  TranslationMap english_translations = {
      {strings::i18n::play,
       TranslatableString("play", "Main menu button to start a new game")},
      {strings::i18n::about,
       TranslatableString("about",
                          "Main menu button to show game information")},
      {strings::i18n::exit,
       TranslatableString("exit", "Main menu button to quit the game")},
      {strings::i18n::loading,
       TranslatableString("Loading...", "Text shown while game is loading")},
      {strings::i18n::gameover,
       TranslatableString("game over", "Text shown when player loses")},
      {strings::i18n::victory,
       TranslatableString("victory!", "Text shown when player wins")},
      {strings::i18n::start,
       TranslatableString("start", "Button to begin gameplay")},
      {strings::i18n::back,
       TranslatableString("back",
                          "Navigation button to return to previous screen")},
      {strings::i18n::continue_game,
       TranslatableString("continue", "Button to continue after round ends")},
      {strings::i18n::quit,
       TranslatableString("quit", "Button to exit current game session")},
      {strings::i18n::settings,
       TranslatableString("settings",
                          "Main menu button to access game settings")},
      {strings::i18n::volume,
       TranslatableString("volume", "Generic volume setting label")},
      {strings::i18n::fullscreen,
       TranslatableString("fullscreen", "Checkbox to toggle fullscreen mode")},
      {strings::i18n::resolution,
       TranslatableString("resolution",
                          "Dropdown to select screen resolution")},
      {strings::i18n::language,
       TranslatableString("language", "Dropdown to select game language")},

      // Additional UI strings
      {strings::i18n::round_settings,
       TranslatableString("round settings",
                          "Title for round configuration screen")},
      {strings::i18n::resume,
       TranslatableString("resume", "Button to unpause the game")},
      {strings::i18n::back_to_setup,
       TranslatableString("back to setup",
                          "Button to return to game setup from pause menu")},
      {strings::i18n::exit_game,
       TranslatableString("exit game",
                          "Button to quit current game from pause menu")},
      {strings::i18n::round_length,
       TranslatableString("round length",
                          "Label for round time duration setting")},
      {strings::i18n::allow_tag_backs,
       TranslatableString("allow tag backs",
                          "Checkbox for tag-and-go game mode setting")},
      {strings::i18n::select_map,
       TranslatableString("select map", "Button to choose a map for the game")},
      {strings::i18n::master_volume,
       TranslatableString("master volume", "Slider for overall game volume")},
      {strings::i18n::music_volume,
       TranslatableString("music volume",
                          "Slider for background music volume")},
      {strings::i18n::sfx_volume,
       TranslatableString("sfx volume", "Slider for sound effects volume")},
      {strings::i18n::post_processing,
       TranslatableString("post processing",
                          "Checkbox to enable visual post-processing effects")},
      {strings::i18n::round_end,
       TranslatableString("round end", "Title shown when a round finishes")},
      {strings::i18n::paused,
       TranslatableString("paused", "Large text shown when game is paused")},
      {strings::i18n::unknown,
       TranslatableString("unknown", "Fallback text for unknown game states")},
      {strings::i18n::unlimited,
       TranslatableString("unlimited", "Option for unlimited round time")},
      {strings::i18n::easy,
       TranslatableString("easy", "AI difficulty level - easiest setting")},
      {strings::i18n::medium,
       TranslatableString("medium", "AI difficulty level - moderate setting")},
      {strings::i18n::hard,
       TranslatableString("hard", "AI difficulty level - challenging setting")},
      {strings::i18n::expert,
       TranslatableString("expert", "AI difficulty level - hardest setting")},

      // Player Statistics
      {strings::i18n::lives_label,
       TranslatableString("lives: {}", "Label for player lives display")},
      {strings::i18n::kills_label,
       TranslatableString("kills: {}", "Label for player kill count display")},
      {strings::i18n::hippos_label,
       TranslatableString("hippos: {}",
                          "Label for hippo collection count display")},
      {strings::i18n::hippos_zero,
       TranslatableString("hippos: 0",
                          "Fallback text when no hippos collected")},
      {strings::i18n::not_it_timer,
       TranslatableString("not it: {:.1f}s",
                          "Label for tag game timer display")},

      // Round Settings Labels
      {strings::i18n::win_condition_label,
       TranslatableString("win condition: {}",
                          "Label for win condition setting")},
      {strings::i18n::num_lives_label,
       TranslatableString("num lives: {}", "Label for starting lives setting")},
      {strings::i18n::round_length_with_time,
       TranslatableString("round length: {}",
                          "Label for round time duration setting")},
      {strings::i18n::total_hippos_label,
       TranslatableString("total hippos: {}",
                          "Label for hippo count setting")}};

  TranslationMap korean_translations = {
      {strings::i18n::play,
       TranslatableString("시작", "새 게임을 시작하는 메인 메뉴 버튼")},
      {strings::i18n::about,
       TranslatableString("정보", "게임 정보를 보여주는 메인 메뉴 버튼")},
      {strings::i18n::exit,
       TranslatableString("종료", "게임을 종료하는 메인 메뉴 버튼")},
      {strings::i18n::loading,
       TranslatableString("로딩중...", "게임이 로딩 중일 때 표시되는 텍스트")},
      {strings::i18n::gameover,
       TranslatableString("게임 오버",
                          "플레이어가 패배했을 때 표시되는 텍스트")},
      {strings::i18n::victory,
       TranslatableString("승리!", "플레이어가 승리했을 때 표시되는 텍스트")},
      {strings::i18n::start,
       TranslatableString("시작", "게임플레이를 시작하는 버튼")},
      {strings::i18n::back,
       TranslatableString("뒤로", "이전 화면으로 돌아가는 네비게이션 버튼")},
      {strings::i18n::continue_game,
       TranslatableString("계속", "라운드가 끝난 후 계속하는 버튼")},
      {strings::i18n::quit,
       TranslatableString("종료", "현재 게임 세션을 종료하는 버튼")},
      {strings::i18n::settings,
       TranslatableString("설정", "게임 설정에 접근하는 메인 메뉴 버튼")},
      {strings::i18n::volume,
       TranslatableString("볼륨", "일반적인 볼륨 설정 라벨")},
      {strings::i18n::fullscreen,
       TranslatableString("전체화면", "전체화면 모드를 토글하는 체크박스")},
      {strings::i18n::resolution,
       TranslatableString("해상도", "화면 해상도를 선택하는 드롭다운")},
      {strings::i18n::language,
       TranslatableString("언어 (language)", "게임 언어를 선택하는 드롭다운")},

      {strings::i18n::round_settings,
       TranslatableString("라운드 설정", "라운드 구성 화면의 제목")},
      {strings::i18n::resume,
       TranslatableString("계속", "게임을 일시정지 해제하는 버튼")},
      {strings::i18n::back_to_setup,
       TranslatableString("설정으로 돌아가기",
                          "일시정지 메뉴에서 게임 설정으로 돌아가는 버튼")},
      {strings::i18n::exit_game,
       TranslatableString("게임 종료",
                          "일시정지 메뉴에서 현재 게임을 종료하는 버튼")},
      {strings::i18n::round_length,
       TranslatableString("라운드 길이", "라운드 시간 지속 설정의 라벨")},
      {strings::i18n::allow_tag_backs,
       TranslatableString("태그 백 허용",
                          "태그 앤 고 게임 모드 설정을 위한 체크박스")},
      {strings::i18n::select_map,
       TranslatableString("맵 선택", "게임용 맵을 선택하는 버튼")},
      {strings::i18n::master_volume,
       TranslatableString("마스터 볼륨 (master volume)",
                          "전체 게임 볼륨을 위한 슬라이더")},
      {strings::i18n::music_volume,
       TranslatableString("음악 볼륨 (music volume)",
                          "배경 음악 볼륨을 위한 슬라이더")},
      {strings::i18n::sfx_volume,
       TranslatableString("효과음 볼륨 (sfx volume)",
                          "효과음 볼륨을 위한 슬라이더")},
      {strings::i18n::post_processing,
       TranslatableString("후처리",
                          "시각적 후처리 효과를 활성화하는 체크박스")},
      {strings::i18n::round_end,
       TranslatableString("라운드 종료 (round end)",
                          "라운드가 끝날 때 표시되는 제목")},
      {strings::i18n::paused,
       TranslatableString("일시정지",
                          "게임이 일시정지되었을 때 표시되는 큰 텍스트")},
      {strings::i18n::unknown,
       TranslatableString("알 수 없음",
                          "알 수 없는 게임 상태를 위한 대체 텍스트")},
      {strings::i18n::unlimited,
       TranslatableString("무제한", "무제한 라운드 시간을 위한 옵션")},
      {strings::i18n::easy,
       TranslatableString("쉬움", "AI 난이도 - 가장 쉬운 설정")},
      {strings::i18n::medium,
       TranslatableString("보통", "AI 난이도 - 보통 설정")},
      {strings::i18n::hard,
       TranslatableString("어려움", "AI 난이도 - 도전적인 설정")},
      {strings::i18n::expert,
       TranslatableString("전문가", "AI 난이도 - 가장 어려운 설정")},

      {strings::i18n::lives_label,
       TranslatableString("생명 (lives): {}", "플레이어 생명 표시 라벨")},
      {strings::i18n::kills_label,
       TranslatableString("킬: {}", "플레이어 킬 카운트 표시 라벨")},
      {strings::i18n::hippos_label,
       TranslatableString("하마: {}", "하마 수집 카운트 표시 라벨")},
      {strings::i18n::hippos_zero,
       TranslatableString("하마: 0",
                          "하마를 수집하지 않았을 때의 대체 텍스트")},
      {strings::i18n::not_it_timer,
       TranslatableString("술래: {:.1f}초", "술래잡기 게임 타이머 표시 라벨")},

      {strings::i18n::win_condition_label,
       TranslatableString("승리 조건: {}", "승리 조건 설정 라벨")},
      {strings::i18n::num_lives_label,
       TranslatableString("시작 생명: {}", "시작 생명 설정 라벨")},
      {strings::i18n::round_length_with_time,
       TranslatableString("라운드 길이: {}", "라운드 시간 지속 설정 라벨")},
      {strings::i18n::total_hippos_label,
       TranslatableString("총 하마: {}", "하마 개수 설정 라벨")}};

  TranslationMap japanese_translations = {
      {strings::i18n::play,
       TranslatableString("プレイ",
                          "新しいゲームを開始するメインメニューボタン")},
      {strings::i18n::about,
       TranslatableString("情報", "ゲーム情報を表示するメインメニューボタン")},
      {strings::i18n::exit,
       TranslatableString("終了", "ゲームを終了するメインメニューボタン")},
      {strings::i18n::loading,
       TranslatableString("読み込み中...",
                          "ゲームが読み込み中に表示されるテキスト")},
      {strings::i18n::gameover,
       TranslatableString("ゲームオーバー",
                          "プレイヤーが敗北した時に表示されるテキスト")},
      {strings::i18n::victory,
       TranslatableString("勝利！",
                          "プレイヤーが勝利した時に表示されるテキスト")},
      {strings::i18n::start,
       TranslatableString("開始", "ゲームプレイを開始するボタン")},
      {strings::i18n::back,
       TranslatableString("戻る", "前の画面に戻るナビゲーションボタン")},
      {strings::i18n::continue_game,
       TranslatableString("続行", "ラウンド終了後に続行するボタン")},
      {strings::i18n::quit,
       TranslatableString("終了", "現在のゲームセッションを終了するボタン")},
      {strings::i18n::settings,
       TranslatableString("設定",
                          "ゲーム設定にアクセスするメインメニューボタン")},
      {strings::i18n::volume,
       TranslatableString("音量", "一般的な音量設定ラベル")},
      {strings::i18n::fullscreen,
       TranslatableString("フルスクリーン",
                          "フルスクリーンモードを切り替えるチェックボックス")},
      {strings::i18n::resolution,
       TranslatableString("解像度", "画面解像度を選択するドロップダウン")},
      {strings::i18n::language,
       TranslatableString("言語 (Language)",
                          "ゲーム言語を選択するドロップダウン")},

      {strings::i18n::round_settings,
       TranslatableString("ラウンド設定", "ラウンド構成画面のタイトル")},
      {strings::i18n::resume,
       TranslatableString("続行", "ゲームの一時停止を解除するボタン")},
      {strings::i18n::back_to_setup,
       TranslatableString("設定に戻る",
                          "一時停止メニューからゲーム設定に戻るボタン")},
      {strings::i18n::exit_game,
       TranslatableString("ゲーム終了",
                          "一時停止メニューから現在のゲームを終了するボタン")},
      {strings::i18n::round_length,
       TranslatableString("ラウンド時間", "ラウンド時間持続設定のラベル")},
      {strings::i18n::allow_tag_backs,
       TranslatableString(
           "タグバック許可",
           "タグアンドゴーゲームモード設定のためのチェックボックス")},
      {strings::i18n::select_map,
       TranslatableString("マップ選択", "ゲーム用マップを選択するボタン")},
      {strings::i18n::master_volume,
       TranslatableString("マスターボリューム",
                          "全体ゲーム音量のためのスライダー")},
      {strings::i18n::music_volume,
       TranslatableString("音楽ボリューム", "背景音楽音量のためのスライダー")},
      {strings::i18n::sfx_volume,
       TranslatableString("効果音ボリューム", "効果音音量のためのスライダー")},
      {strings::i18n::post_processing,
       TranslatableString("後処理",
                          "視覚的後処理効果を有効にするチェックボックス")},
      {strings::i18n::round_end,
       TranslatableString("ラウンド終了",
                          "ラウンドが終了した時に表示されるタイトル")},
      {strings::i18n::paused,
       TranslatableString(
           "一時停止", "ゲームが一時停止された時に表示される大きなテキスト")},
      {strings::i18n::unknown,
       TranslatableString("不明", "不明なゲーム状態のための代替テキスト")},
      {strings::i18n::unlimited,
       TranslatableString("無制限", "無制限ラウンド時間のためのオプション")},
      {strings::i18n::easy,
       TranslatableString("簡単", "AI難易度 - 最も簡単な設定")},
      {strings::i18n::medium,
       TranslatableString("普通", "AI難易度 - 普通の設定")},
      {strings::i18n::hard,
       TranslatableString("難しい", "AI難易度 - 挑戦的な設定")},
      {strings::i18n::expert,
       TranslatableString("エキスパート", "AI難易度 - 最も難しい設定")},

      {strings::i18n::lives_label,
       TranslatableString("ライフ: {}", "プレイヤーライフ表示ラベル")},
      {strings::i18n::kills_label,
       TranslatableString("キル: {}", "プレイヤーキルカウント表示ラベル")},
      {strings::i18n::hippos_label,
       TranslatableString("カバ: {}", "カバ収集カウント表示ラベル")},
      {strings::i18n::hippos_zero,
       TranslatableString("カバ: 0", "カバを収集していない時の代替テキスト")},
      {strings::i18n::not_it_timer,
       TranslatableString("鬼: {:.1f}초", "鬼ごっこゲームタイマー表示ラベル")},

      {strings::i18n::win_condition_label,
       TranslatableString("勝利条件: {}", "勝利条件設定ラベル")},
      {strings::i18n::num_lives_label,
       TranslatableString("開始ライフ: {}", "開始ライフ設定ラベル")},
      {strings::i18n::round_length_with_time,
       TranslatableString("ラウンド時間: {}", "ラウンド時間持続設定ラベル")},
      {strings::i18n::total_hippos_label,
       TranslatableString("総カバ: {}", "カバ個数設定ラベル")}};

  translations[Language::English] = english_translations;
  translations[Language::Korean] = korean_translations;
  translations[Language::Japanese] = japanese_translations;

  return translations;
}

LanguageMap get_translation_data() {
  static LanguageMap data = create_translation_data();
  return data;
}

} // namespace translation_manager
